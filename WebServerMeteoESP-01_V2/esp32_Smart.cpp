#include <Arduino.h>

String setHtml(int tonm, int toff, int hon, int hoff, int tenab, int henab, int mrelay, int mobil, int levelbat, int bstatus, int bat_on, int bat_off) {
  return R"===(<!doctype html> <html> <head> <meta http-equiv=Content-Type content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>ESP-01 Smart Relay</title> <style>body{text-align:center;}.buton{background-color:#04aa6d;border:none;color:#E9EDF3;padding:10px 20px} .butoff{background-color:#f44336;border:none;padding:10px 20px;color:#E9EDF3} .checkshow{display: none;} .batshow{display: none;} .imghow{ visibility: hidden; display: none; } </style> </head> <body id="bmain" onLoad=onload();> <b>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç</b><p> <input type="checkbox" name="chmob" id="chmob"><label for="chmob">–ó–∞—Ä—è–¥–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label><span id="param_bat"> </span> <div class="batshow" id="setbatter"><p> –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ.&#32;<input id=batOn value=80 size=1>% <p> –í—ã–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ.&#32;<input id=batOff value=90 size=1>% <p> <input name=butbatSend type=button value=–°–æ—Ö—Ä–∞–Ω–∏—Ç—å onClick=saveBat()></p></div> <div class="checkshow" id="chshow"><p> <select id=selectOn> <option>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</option> <option>–í–ª–∞–∂–Ω–æ—Å—Ç—å</option> </select>&#32;–≤–∫–ª./–≤—ã–∫–ª.<input type=checkbox id=onoff_dev></p><p> –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ.&#32;<input id=vOn value=20 size=1> <b id=pon>&#176C</b></p><p> –í—ã–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ.&#32;<input id=vOff value=30 size=1> <b id=poff>&#176C</b></p><p> <input name=butSend type=button value=–°–æ—Ö—Ä–∞–Ω–∏—Ç—å onClick=goTo()></p></div> <p>–†–µ–ª–µ —Å–µ–π—á–∞—Å: <c id=srele>OFF</c></p> <c id=img_off class=imghow><svg width=200.000 height=130.000 viewBox="0.0 0.0 200.000 130.000"> <path d="M16.84 49.63L83.23 49.63L83.23 82.83L16.84 82.83L16.84 49.63" fill=none stroke=black stroke-width=1.5 /> <path d="M50.03 16.44L50.03 49.63" fill=none stroke=black stroke-width=1.5 /> <path d="M50.03 82.83L50.03 116.02" fill=none stroke=black stroke-width=1.5 /> <path d="M83.23 66.23L91.53 66.23" fill=none stroke=black stroke-width=1.5 /> <path d="M99.83 66.23L108.13 66.23" fill=none stroke=black stroke-width=1.5 /> <path d="M116.43 66.23L124.73 66.23" fill=none stroke=black stroke-width=1.5 /> <path d="M133.02 116.02L133.02 91.13" fill=none stroke=black stroke-width=1.5 /> <path d="M133.02 91.13L149.62 41.33" fill=none stroke=black stroke-width=1.5 /> <path d="M133.02 49.63L152.94 49.63" fill=none stroke=black stroke-width=1.5 /> <path d="M133.02 49.63L133.02 16.44" fill=none stroke=black stroke-width=1.5 /> <path d="M166.22 49.63L166.22 16.44" fill=none stroke=black stroke-width=1.5 /> <path d="M133.02 66.23L141.32 66.23" fill=none stroke=black stroke-width=1.5 /></svg> </c> <c id=img_on class=imghow><svg xmlns="http://www.w3.org/2000/svg" width="200" height="130"> <path fill="none" stroke="#000" stroke-width="1.5" d="M16.84 49.63h66.39v33.2H16.84v-33.2M50.03 16.44v33.19M50.03 82.83v33.19M83.23 66.23h8.3M99.83 66.23h8.3M116.43 66.23h8.3M133.02 116.02V91.13"/><path fill="none" stroke="#000" stroke-width="1.977" d="m132.898 92.582 31.757-45.221"/> <path fill="none" stroke="#000" stroke-width="1.5" d="M133.02 49.63h19.92M133.02 49.63V16.44M166.22 49.63V16.44M133.02 66.23h8.3"/> <path d="M17.604 66.275V50.502h64.84v31.545h-64.84Z" style="fill:#0f0;stroke-width:.159314"/> </svg> </c> <div id=showRelay> </div> <input class=butoff type=button id=butOff value=OFF onClick=butOff()>&nbsp;&nbsp; &nbsp;<input class=buton type=button id=butOn value=ON onClick=butOn()><br> <iframe  src="/param" id="mframe" class="imghow"> </iframe> <script> const tonm=)===" + String(tonm) + R"(; const toff=)" + String(toff) + R"(; const hon=)" + String(hon) + R"(; const hoff=)" + String(hoff) + R"(; const tenab=)" + String(tenab) + R"(; const henab=)" + String(henab) + R"(; var relay=)" + String(mrelay) + R"(; const mobil=)" + String(mobil) + R"(; var levelbat=)" + String(levelbat) + R"(; var bstatus=)" + String(bstatus) + R"(; const bat_on=)" + String(bat_on) + R"(; const bat_off=)" + String(bat_off) + R"===(; var indexon=0,imgon=document.getElementById("img_on"),imgoff=document.getElementById("img_off"),Onval=document.getElementById("vOn"),Offval=document.getElementById("vOff"),BatOn=document.getElementById("batOn"),BatOff=document.getElementById("batOff"),onoff_dev=document.getElementById("onoff_dev"),selectElemOn=document.getElementById("selectOn"),meteo=document.getElementById("chshow"),battery=document.getElementById("setbatter"),chmob=document.getElementById("chmob"),pon=document.getElementById("pon"),poff=document.getElementById("poff");function onload(){chmob.checked=Number(mobil),chmob.checked?(meteo.style.display="none",battery.style.display="block"):(meteo.style.display="block",battery.style.display="none"),Onval.value=tonm,Offval.value=toff,onoff_dev.checked=Number(tenab),BatOn.value=bat_on,BatOff.value=bat_off,setReleShow(relay),history.replaceState(null,"",location.pathname)}function bat_show(e,n){1==mobil&&(mbatstatus="  –±–∞—Ç–∞—Ä–µ—è: üîã"+e+"%",1==n&&(mbatstatus+=" ‚ö°"),document.getElementById("param_bat").innerHTML=mbatstatus)}function setReleShow(e){1==e?(document.getElementById("showRelay").innerHTML=document.getElementById("img_on").innerHTML,document.getElementById("srele").innerHTML="ON"):(document.getElementById("showRelay").innerHTML=document.getElementById("img_off").innerHTML,document.getElementById("srele").innerHTML="OFF")}function goTo(){confirm("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ?")&&(murl=0==indexon?window.location.pathname+"?index="+indexon+"&to="+Onval.value+"&tf="+Offval.value+"&te="+onoff_dev.checked+"&endhead=1":window.location.pathname+"?index="+indexon+"&ho="+Onval.value+"&hf="+Offval.value+"&he="+onoff_dev.checked+"&endhead=1",window.location=murl)}function saveBat(){confirm("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ?")&&(murl=window.location.pathname+"?bat_on="+BatOn.value+"&bat_off="+BatOff.value+"&endhead=1",window.location=murl)}function butOff(){murl=window.location.pathname+"?index="+indexon+"&rele=0&endhead=1",window.location=murl}function butOn(){murl=window.location.pathname+"?index="+indexon+"&rele=1&endhead=1",window.location=murl}chmob.addEventListener("change",function(){murl=chmob.checked?(meteo.style.display="none",battery.style.display="block",window.location.pathname+"?index="+indexon+"&mobil=1&endhead=1"):(battery.style.display="none",meteo.style.display="block",window.location.pathname+"?index="+indexon+"&mobil=0&endhead=1"),window.location=murl}),selectElemOn.addEventListener("change",function(){0==(indexon=selectElemOn.selectedIndex)?(pon.innerHTML="&#176C",poff.innerHTML="&#176C",Onval.value=tonm,Offval.value=toff,onoff_dev.checked=Number(tenab)):(pon.innerHTML="%",poff.innerHTML="%",Onval.value=hon,Offval.value=hoff,onoff_dev.checked=Number(henab))}),setInterval(function(){try{document.getElementById("mframe").contentWindow.location.reload()}catch(e){}},5e3),document.getElementById("mframe").addEventListener("load",function(e){try{var n=this.contentWindow.document.body.innerHTML;index=0;var t=Array(7).fill(0);for(count=n.length;3<count;)pos=n.indexOf("<br>"),value=n.slice(0,pos),"nan"!=value?t[index]=value:t[index]=0,index++,n=(n=n.replace(value+"<br>","")).trim(),count=n.length;mlevelbat=t[3],mbstatus=t[4],mrelay=t[5]}catch(e){mlevelbat=0,mbstatus=0,mrelay=0}parent.setReleShow(mrelay),parent.bat_show(mlevelbat,mbstatus)}); </script></body></html>)===";
}

String getSHtml(String pointWiFi, byte modepoint, String ssid, String pasw, String ips, String gats, String sms, String pms) {
  return R"(<!DOCTYPE html><meta http-equiv='Content-Type' content='text/html; charset=utf-8'><meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no'><title>Settings ESP8266</title><style>  .c,body{text-align:center;} div,input{padding:5px;font-size:1em;} input{width:95%;} body{font-family:verdana;} button{border:0;border-radius:.3rem;background-color:#1D92D3;color:#E9EDF3;line-height:2.4rem;font-size:14px;width:90%;} a{color:#000;font-weight:700;text-decoration:none;} a:hover{color:#1D92D3;text-decoration:underline;} .q{height:16px;margin:0;padding:0 5px;text-align:right;min-width:38px;} .q.q-0:after{background-position-x:0;} .q.q-1:after{background-position-x:-16px;} .q.q-2:after{background-position-x:-32px;} .q.q-3:after{background-position-x:-48px;} .q.q-4:after{background-position-x:-64px;} .q.l:before{background-position-x:-80px;padding-right:5px;} .ql .q{float:left;} .qr .q{float:right;} .qinv .q{filter:invert(1);} .q:after,.q:before{content:'';width:16px;height:16px;display:inline-block;background-repeat:no-repeat;background-position:16px 0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAQCAMAAADeZIrLAAAAJFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADHJj5lAAAAC3RSTlMAIjN3iJmqu8zd7vF8pzcAAABsSURBVHja7Y1BCsAwCASNSVo3/v+/BUEiXnIoXkoX5jAQMxTHzK9cVSnvDxwD8bFx8PhZ9q8FmghXBhqA1faxk92PsxvRc2CCCFdhQCbRkLoAQ3q/wWUBqG35ZxtVzW4Ed6LngPyBU2CobdIDQ5oPWI5nCUwAAAAASUVORK5CYII=');} input:disabled{opacity:.5;} div.c1{text-align:left;display:inline-block;min-width:260px;} .mtable{width:100%;text-align:center;border-collapse:separate;border-radius:10px;border:1px solid #999;} </style><body onload='onmload()'><div class='qr c1'> )" + pointWiFi + R"( <br><form id='wmform' method='get' action='wifisave' name="wmform"><table width='400' class='mtable'><tr><td>SSID:<td colspan='4'><input id='s' name='s' placeholder='SSID'><td rowspan='4'><button type='submit'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button><br><div class='c'><br><a href='/wifi'>Scan</a></div><tr><td>Password:<td colspan='4'><div class='password'><input id='p' name='p' placeholder='–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å'> <a href='#' class='password-control' onclick='return show_hide_password(this);'></a></div><tr><td>Static IP:<td colspan='4'><div class='password'><input id='ip' name='ip'> <a href='#' class='password-control' onclick= 'return show_hide_password(this);'></a></div><tr><td>Gatwei:<td colspan='4'><div class='password'><input id='g' name='g'> <a href='#' class='password-control' onclick= 'return show_hide_password(this);'></a></div></table></form><p></p><form id='espform' method='get' action='espsave' name="espform"><table width='400' class='mtable'><tr><td>—Ä–µ–∂–∏–º<input type='checkbox' id='cp' name='cp'><td colspan='6' class='mtext'><label id='chl'>ESP32 –∫–ª–∏–µ–Ω—Ç –∏ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞</label><tr><td colspan='6' class='textv'><br>–ó–∞–¥–∞–π—Ç–µ –∏–º—è –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è –≤ —Ä–µ–∂–∏–º–µ —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞, –∞–¥—Ä–µ—Å IP 192.168.4.1<tr><td>SSID:<td colspan='4'><input id='sm' name='sm' placeholder='SSID'><td rowspan='2'><button type='submit'>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button><tr><td>Password:<td colspan='4'><div class='password'><input id='pm' name='pm' placeholder='–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å'> <a href= '#' class='password-control' onclick='return show_hide_password(this);'></a></div></table></form><div class='c'><a href='/start'>–í—ã–π—Ç–∏</a></div><script> var modepoint=)" + String(modepoint) + R"(, ssid=')" + ssid + R"(', pasw=')" + pasw + R"(', ips=')" + ips + R"(', gats=')" + gats + R"(', sms=')" + sms + R"(', pms=')" + pms + R"(', chss='yes'; function onmload(){chec.checked=Number(modepoint), chec.checked?document.getElementById("chl").innerHTML="ESP32 –∫–ª–∏–µ–Ω—Ç –∏ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞":document.getElementById("chl").innerHTML="ESP32 –∫–ª–∏–µ–Ω—Ç",s.value=ssid,p.value=pasw,ip.value=ips,gat.value=gats,sm.value=sms,pm.value=pms}function c(e,t){ return console.log(e),document.getElementById("s").value=e.innerText||e.textContent,p=e.nextElementSibling.classList.contains("l"),document.getElementById("p").disabled=!p,p&&document.getElementById("p").focus(),!1} s=document.getElementById("s"),p=document.getElementById("p"),ip=document.getElementById("ip"),gat=document.getElementById("g"),sm=document.getElementById("sm"),pm=document.getElementById("pm"),chec=document.getElementById("cp"), chec.addEventListener("change",function(){chec.checked?(modepoint=1,document.getElementById("chl").innerHTML="ESP32 –∫–ª–∏–µ–Ω—Ç –∏ —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞"):(modepoint=0,document.getElementById("chl").innerHTML="ESP32 –∫–ª–∏–µ–Ω—Ç")}); </script></div>)";
}

String getStart(String stIP) {
  return R"(<!DOCTYPE html> <html lang='en'><head><meta http-equiv='refresh' content='4;URL=http://)" + stIP + R"(/start'> <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no' /><title>Config WiFi</title><meta charset='utf-8'> <style> body{text-align:center;} button{border:0; border-radius:.3rem; background-color:#1D92D3; color:#E9EDF3; line-height:2.4rem; font-size:1.2rem; width:100 %}</style></head><body> <h1>–î–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã</h1><p>–û–∂–∏–¥–∞–π—Ç–µ. –í —Ç–µ—á–µ–Ω–∏–∏ 10 —Å–µ–∫. –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥—É–ª—è.</body> </html>)";
}

String getReset() {
  return R"(<!DOCTYPE html> <html lang='en'><head><meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no' /> <title>Reset WiFi</title><meta charset='utf-8'><style>body {	text-align: center;}</style></head> <body onLoad= 'nsrart()'><script language='JavaScript' type='text/javascript'>function nsrart(){	setTimeout('window.history.go(-1)',3000);	} </script> <h1>–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞</h1></body></html>)";
}

String getMeteo(String davl, String temper, String vlaz) {
  return R"(<!DOCTYPE html> <meta http-equiv='Content-Type' content='text/html; charset=utf-8'> <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no'> <title>Meteo Inform</title><style> body{text-align:center;font-family:verdana;} div{text-align:center;display:inline-block;min-width:340px;} .mtitle{font-size:26px;color:#084893;} span{width:40%;margin:11px;text-align:left;border:2px;border-radius:.3rem;border-color:#1fa3ec;line-height:2.4rem;} .mtable{background-color:#1D92D3;color:#E9EDF3;text-align:left;border-collapse:separate;border-radius:10px;border:1px solid #999;font-size:1.5em;}</style> <p><br><br></p><div class='mtitle'>ESP32 —Å –¥–∞—Ç—á–∏–∫–æ–º BMP280</div> <p></p><div class='mtable'><br> <span>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞:&nbsp; )" + temper + R"(&deg;C</span><br><br> <span>–î–∞–≤–ª–µ–Ω–∏–µ:&nbsp;)" + davl + R"( –º–º.—Ä—Å</span><br> <br><span>–í–ª–∞–∂–Ω–æ—Å—Ç—å:&nbsp;)" + vlaz + R"( %</span><br><br></div> <p><a  href='/start'>–í—ã–π—Ç–∏</a>)";
}