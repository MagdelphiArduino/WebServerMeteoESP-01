

#define WireClock 400e3  //Разгоняем шину I2C в 4 раза до 400 кГц (только софтварная так может, хардварная 100e3)

// Определяем пины
#define swSCL 1
#define swSDA 2
#define RELAY 0

#define SEALEVELPRESSURE_HPA (1013.25)

#define OLED_ADDRESS 0x3C  // address
#define I2C_400KHZ 1       // 0 to use default 100Khz, 1 for 400Khz
// registers
#define OLED_COMMAND_MODE 0x80
#define OLED_DATA_MODE 0x40
// commands
#define OLED_CMD_DISPLAY_OFF 0xAE
#define OLED_CMD_DISPLAY_ON 0xAF
#define OLED_CMD_NORMAL_DISPLAY 0xA6
#define OLED_CMD_INVERSE_DISPLAY 0xA7
#define OLED_CMD_SET_BRIGHTNESS 0x81
#define HORIZONTAL_ADDRESSING 0x00
#define PAGE_ADDRESSING 0x02
// Addressing Setting Commands
#define SSD1306_MEMORY_ADDR_MODE 0x20
// Hardware Configuration Commands
#define SSD1306_SET_START_LINE 0x40
#define SSD1306_SET_SEGMENT_REMAP 0xA0
#define SSD1306_SET_DISPLAY_OFFSET 0xD3
#define SSD1306_CHARGE_PUMP 0x8D

void oled_init();
void setCursorXY(uint8_t Xs, uint8_t Ys);
void sendCommand(uint8_t command);
void sendData(uint8_t data);
void clearDisplay();
void printChar(unsigned char C, uint8_t Xs, uint8_t Ys);
void printString(String mstr, uint8_t Xs, uint8_t Ys);

//таблица символов
const uint8_t BasicFont[][5] PROGMEM = {
  0x00, 0x00, 0x00, 0x00, 0x00,  //32  20
  0x00, 0x00, 0x5F, 0x00, 0x00,  //33  21
  0x00, 0x07, 0x00, 0x07, 0x00,  //34  22
  0x14, 0x7F, 0x14, 0x7F, 0x14,  //35  23
  0x24, 0x2A, 0x7F, 0x2A, 0x12,  //36  24
  0x23, 0x13, 0x08, 0x64, 0x62,  //37  25
  0x36, 0x49, 0x56, 0x20, 0x50,  //38  26
  0x00, 0x08, 0x07, 0x03, 0x00,  //39  27
  0x00, 0x1C, 0x22, 0x41, 0x00,  //40  28
  0x00, 0x41, 0x22, 0x1C, 0x00,  //41  29
  0x2A, 0x1C, 0x7F, 0x1C, 0x2A,  //42  2A
  0x08, 0x08, 0x3E, 0x08, 0x08,  //43  2B
  0x00, 0x80, 0x70, 0x30, 0x00,  //44  2C
  0x08, 0x08, 0x08, 0x08, 0x08,  //45  2D
  0x00, 0x00, 0x60, 0x60, 0x00,  //46  2E
  0x20, 0x10, 0x08, 0x04, 0x02,  //47  2F
  0x3E, 0x51, 0x49, 0x45, 0x3E,  //48  30
  0x00, 0x42, 0x7F, 0x40, 0x00,  //49  31
  0x72, 0x49, 0x49, 0x49, 0x46,  //50  32
  0x21, 0x41, 0x49, 0x4D, 0x33,  //51  33
  0x18, 0x14, 0x12, 0x7F, 0x10,  //52  34
  0x27, 0x45, 0x45, 0x45, 0x39,  //53  35
  0x3C, 0x4A, 0x49, 0x49, 0x31,  //54  36
  0x41, 0x21, 0x11, 0x09, 0x07,  //55  37
  0x36, 0x49, 0x49, 0x49, 0x36,  //56  38
  0x46, 0x49, 0x49, 0x29, 0x1E,  //57  39
  0x00, 0x00, 0x14, 0x00, 0x00,  //58  3A
  0x00, 0x40, 0x34, 0x00, 0x00,  //59  3B
  0x00, 0x08, 0x14, 0x22, 0x41,  //60  3C
  0x14, 0x14, 0x14, 0x14, 0x14,  //61  3D
  0x00, 0x41, 0x22, 0x14, 0x08,  //62  3E
  0x02, 0x01, 0x59, 0x09, 0x06,  //63  3F
  0x3E, 0x41, 0x5D, 0x59, 0x4E,  //64  40
  0x7C, 0x12, 0x11, 0x12, 0x7C,  //65  41
  0x7F, 0x49, 0x49, 0x49, 0x36,  //66  42
  0x3E, 0x41, 0x41, 0x41, 0x22,  //67  43
  0x7F, 0x41, 0x41, 0x41, 0x3E,  //68  44
  0x7F, 0x49, 0x49, 0x49, 0x41,  //69  45
  0x7F, 0x09, 0x09, 0x09, 0x01,  //70  46
  0x3E, 0x41, 0x41, 0x51, 0x73,  //71  47
  0x7F, 0x08, 0x08, 0x08, 0x7F,  //72  48
  0x00, 0x41, 0x7F, 0x41, 0x00,  //73  49
  0x20, 0x40, 0x41, 0x3F, 0x01,  //74  4A
  0x7F, 0x08, 0x14, 0x22, 0x41,  //75  4B
  0x7F, 0x40, 0x40, 0x40, 0x40,  //76  4C
  0x7F, 0x02, 0x1C, 0x02, 0x7F,  //77  4D
  0x7F, 0x04, 0x08, 0x10, 0x7F,  //78  4E
  0x3E, 0x41, 0x41, 0x41, 0x3E,  //79  4F
  0x7F, 0x09, 0x09, 0x09, 0x06,  //80  50
  0x3E, 0x41, 0x51, 0x21, 0x5E,  //81  51
  0x7F, 0x09, 0x19, 0x29, 0x46,  //82  52
  0x26, 0x49, 0x49, 0x49, 0x32,  //83  53
  0x03, 0x01, 0x7F, 0x01, 0x03,  //84  54
  0x3F, 0x40, 0x40, 0x40, 0x3F,  //85  55
  0x1F, 0x20, 0x40, 0x20, 0x1F,  //86  56
  0x3F, 0x40, 0x38, 0x40, 0x3F,  //87  57
  0x63, 0x14, 0x08, 0x14, 0x63,  //88  58
  0x03, 0x04, 0x78, 0x04, 0x03,  //89  59
  0x61, 0x59, 0x49, 0x4D, 0x43,  //90  5A
  0x00, 0x7F, 0x41, 0x41, 0x41,  //91  5B
  0x02, 0x04, 0x08, 0x10, 0x20,  //92  5C
  0x00, 0x41, 0x41, 0x41, 0x7F,  //93  5D
  0x04, 0x02, 0x01, 0x02, 0x04,  //94  5E
  0x40, 0x40, 0x40, 0x40, 0x40,  //95  5F
  0x00, 0x03, 0x07, 0x08, 0x00,  //96  60
  0x20, 0x54, 0x54, 0x78, 0x40,  //97  61
  0x7F, 0x28, 0x44, 0x44, 0x38,  //98  62
  0x38, 0x44, 0x44, 0x44, 0x28,  //99  63
  0x38, 0x44, 0x44, 0x28, 0x7F,  //100 64
  0x38, 0x54, 0x54, 0x54, 0x18,  //101 65
  0x00, 0x08, 0x7E, 0x09, 0x02,  //102 66
  0x18, 0xA4, 0xA4, 0x9C, 0x78,  //103 67
  0x7F, 0x08, 0x04, 0x04, 0x78,  //104 68
  0x00, 0x44, 0x7D, 0x40, 0x00,  //105 69
  0x20, 0x40, 0x40, 0x3D, 0x00,  //106 6A
  0x7F, 0x10, 0x28, 0x44, 0x00,  //107 6B
  0x00, 0x41, 0x7F, 0x40, 0x00,  //108 6C
  0x7C, 0x04, 0x78, 0x04, 0x78,  //109 6D
  0x7C, 0x08, 0x04, 0x04, 0x78,  //110 6E
  0x38, 0x44, 0x44, 0x44, 0x38,  //111 6F
  0xFC, 0x18, 0x24, 0x24, 0x18,  //112 70
  0x18, 0x24, 0x24, 0x18, 0xFC,  //113 71
  0x7C, 0x08, 0x04, 0x04, 0x08,  //114 72
  0x48, 0x54, 0x54, 0x54, 0x24,  //115 73
  0x04, 0x04, 0x3F, 0x44, 0x24,  //116 74
  0x3C, 0x40, 0x40, 0x20, 0x7C,  //117 75
  0x1C, 0x20, 0x40, 0x20, 0x1C,  //118 76
  0x3C, 0x40, 0x30, 0x40, 0x3C,  //119 77
  0x44, 0x28, 0x10, 0x28, 0x44,  //120 78
  0x4C, 0x90, 0x90, 0x90, 0x7C,  //121 79
  0x44, 0x64, 0x54, 0x4C, 0x44,  //122 7A
  0x00, 0x08, 0x36, 0x41, 0x00,  //123 7B
  0x00, 0x00, 0x77, 0x00, 0x00,  //124 7C
  0x00, 0x41, 0x36, 0x08, 0x00,  //125 7D
  0x02, 0x01, 0x02, 0x04, 0x02,  //126 7E
  0x3C, 0x26, 0x23, 0x26, 0x3C,  //127 7F
  0xFC, 0x18, 0x24, 0x24, 0x18,  //192 C0  р
  0x38, 0x44, 0x44, 0x44, 0x28,  //193 C1  с
  0x04, 0x04, 0x7C, 0x04, 0x04,  //194 C2  т
  0x44, 0x28, 0x10, 0x08, 0x04,  //195 C3  у
  0x18, 0x24, 0x7E, 0x24, 0x18,  //196 C4  ф
  0x44, 0x28, 0x10, 0x28, 0x44,  //197 C5  х
  0x3C, 0x20, 0x20, 0x3C, 0x60,  //198 C6  ц
  0x1C, 0x10, 0x10, 0x7C, 0x00,  //199 C7  ч
  0x7C, 0x40, 0x7C, 0x40, 0x7C,  //200 C8  ш
  0x3C, 0x20, 0x3C, 0x20, 0x7C,  //201 C9  щ
  0x04, 0x7C, 0x50, 0x70, 0x00,  //202 CA  ъ
  0x7C, 0x50, 0x70, 0x00, 0x7C,  //203 CB  ы
  0x7C, 0x50, 0x50, 0x70, 0x00,  //204 CC  ь
  0x42, 0x42, 0x52, 0x52, 0x3C,  //205 CD  э
  0x7C, 0x10, 0x38, 0x44, 0x38,  //206 CE  ю
  0x40, 0x28, 0x14, 0x7C, 0x00,  //207 CF  я
  0x7C, 0x12, 0x11, 0x12, 0x7C,  //144 90  А
  0x7F, 0x49, 0x49, 0x49, 0x31,  //145 91  Б
  0x7F, 0x45, 0x45, 0x45, 0x3A,  //146 92  В
  0x7F, 0x01, 0x01, 0x01, 0x03,  //147 93  Г
  0x60, 0x3F, 0x21, 0x3F, 0x60,  //148 94  Д
  0x7F, 0x49, 0x49, 0x49, 0x41,  //149 95  Е
  0x73, 0x0C, 0x7F, 0x0C, 0x73,  //150 96  Ж
  0x21, 0x41, 0x49, 0x4D, 0x33,  //151 97  З
  0x7F, 0x10, 0x08, 0x04, 0x7F,  //152 98  И
  0x7E, 0x20, 0x11, 0x08, 0x7E,  //153 99  Й
  0x7F, 0x08, 0x14, 0x22, 0x41,  //154 9A  К
  0x40, 0x3F, 0x01, 0x01, 0x7F,  //155 9B  Л
  0x7F, 0x06, 0x08, 0x06, 0x7F,  //156 9C  М
  0x7F, 0x08, 0x08, 0x08, 0x7F,  //157 9D  Н
  0x3E, 0x41, 0x41, 0x41, 0x3E,  //158 9E  О
  0x7F, 0x01, 0x01, 0x01, 0x7F,  //159 9F  П
  0x7F, 0x09, 0x09, 0x09, 0x06,  //160 A0  Р
  0x3E, 0x41, 0x41, 0x41, 0x22,  //161 A1  С
  0x03, 0x01, 0x7F, 0x01, 0x03,  //162 A2  Т
  0x61, 0x26, 0x18, 0x06, 0x01,  //163 A3  У
  0x1C, 0x22, 0x7F, 0x22, 0x1C,  //164 A4  Ф
  0x63, 0x14, 0x08, 0x14, 0x63,  //165 A5  Х
  0x3F, 0x20, 0x20, 0x3F, 0x60,  //166 A6  Ц
  0x07, 0x08, 0x08, 0x08, 0x7F,  //167 A7  Ч
  0x7F, 0x40, 0x7F, 0x40, 0x7F,  //168 A8  Ш
  0x3F, 0x20, 0x3F, 0x20, 0x7F,  //169 A9  Щ
  0x01, 0x7F, 0x48, 0x48, 0x30,  //170 AA  Ъ
  0x7F, 0x48, 0x78, 0x00, 0x7F,  //171 AB  Ы
  0x7F, 0x48, 0x48, 0x30, 0x00,  //172 AC  Ь
  0x41, 0x49, 0x49, 0x2A, 0x1C,  //173 AD  Э
  0x7F, 0x10, 0x3E, 0x41, 0x3E,  //174 AE  Ю
  0x66, 0x19, 0x09, 0x09, 0x7F,  //175 AF  Я
  0x20, 0x54, 0x54, 0x78, 0x40,  //176 B0  а
  0x3E, 0x49, 0x45, 0x45, 0x38,  //177 B1  б
  0x7E, 0x4A, 0x4A, 0x34, 0x00,  //178 B2  в
  0x7C, 0x04, 0x04, 0x0C, 0x00,  //179 B3  г
  0x38, 0x45, 0x45, 0x49, 0x3E,  //180 B4  д
  0x38, 0x54, 0x54, 0x54, 0x18,  //181 B5  е
  0x4C, 0x30, 0x7C, 0x30, 0x4C,  //182 B6  ж
  0x24, 0x42, 0x4A, 0x34, 0x00,  //183 B7  з
  0x7C, 0x20, 0x10, 0x7C, 0x00,  //184 B8  и
  0x7C, 0x21, 0x11, 0x7C, 0x00,  //185 B9  й
  0x7C, 0x10, 0x28, 0x44, 0x00,  //186 BA  к
  0x40, 0x3C, 0x04, 0x04, 0x7C,  //187 BB  л
  0x7C, 0x08, 0x10, 0x08, 0x7C,  //188 BC  м
  0x7C, 0x10, 0x10, 0x7C, 0x00,  //189 BD  н
  0x38, 0x44, 0x44, 0x44, 0x38,  //190 BE  о
  0x7C, 0x04, 0x04, 0x7C, 0x00,  //191 BF  п
  0xFC, 0x18, 0x24, 0x24, 0x18,  //192 C0  р
  0x38, 0x44, 0x44, 0x44, 0x28,  //193 C1  с
  0x04, 0x04, 0x7C, 0x04, 0x04,  //194 C2  т
  0x4C, 0x90, 0x90, 0x90, 0x7C,  //195 C3  у
  0x18, 0x24, 0x7E, 0x24, 0x18,  //196 C4  ф
  0x44, 0x28, 0x10, 0x28, 0x44,  //197 C5  х
  0x3C, 0x20, 0x20, 0x3C, 0x60,  //198 C6  ц
  0x1C, 0x10, 0x10, 0x7C, 0x00,  //199 C7  ч
  0x7C, 0x40, 0x7C, 0x40, 0x7C,  //200 C8  ш
  0x3C, 0x20, 0x3C, 0x20, 0x7C,  //201 C9  щ
  0x04, 0x7C, 0x50, 0x70, 0x00,  //202 CA  ъ
  0x7C, 0x50, 0x70, 0x00, 0x7C,  //203 CB  ы
  0x7C, 0x50, 0x70, 0x00, 0x00,  //204 CC  ь
  0x42, 0x42, 0x52, 0x52, 0x3C,  //205 CD  э
  0x7C, 0x10, 0x38, 0x44, 0x38,  //206 CE  ю
  0x40, 0x2C, 0x12, 0x7E, 0x00,  //207 CF  я
  0x7C, 0x12, 0x11, 0x12, 0x7C,  //208 D0
};
